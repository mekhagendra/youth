import{r as m,j as e}from"./ui-RQwqDUq4.js";import{u as h,H as w,L as _,r as A}from"./app-9mwM-Ixs.js";import{A as k}from"./app-layout-Dy3PcATW.js";import{B as r}from"./button-D8MIKpEh.js";import{L as p}from"./label-ChxwdN2l.js";import{T as x}from"./textarea-COWY9OPG.js";import{A as C}from"./arrow-left-BBNCYMyT.js";import{c as u}from"./createLucideIcon-B-IynVDi.js";import{E as S}from"./eye-off-oYEEQ-9m.js";import{C as D,a as L}from"./clock-DyzPpVTb.js";import{C as R}from"./circle-check-big-D5dMU6Ei.js";import"./vendor-kLSZ_uSw.js";import"./app-BmapanRv.js";import"./x-isxJH-wT.js";import"./index-XlLsAgWS.js";import"./index-CPiYsXfw.js";import"./users-Dxoa-OZk.js";import"./target-CzErDqDO.js";import"./chevron-right-DkWsTS1T.js";const M=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],$=u("ThumbsDown",M);const P=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],E=u("ThumbsUp",P);function te({auth:l,message:s}){const[j,o]=m.useState(!1),[b,c]=m.useState(!1),n=h({admin_notes:""}),a=h({admin_notes:""});if(!(l.user&&(l.user.user_type==="System Admin"||l.user.user_type==="System Manager")))return null;const g=t=>{t.preventDefault(),n.post(`/admin/voice-of-changes/${s.id}/approve`,{onSuccess:()=>{o(!1)}})},f=t=>{t.preventDefault(),a.post(`/admin/voice-of-changes/${s.id}/reject`,{onSuccess:()=>{c(!1)}})},v=()=>{confirm("Are you sure you want to unpublish this message?")&&A.post(`/admin/voice-of-changes/${s.id}/unpublish`)},N=t=>{const d={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:L,label:"Pending Review"},approved:{bg:"bg-green-100",text:"text-green-800",icon:R,label:"Approved & Published"},rejected:{bg:"bg-red-100",text:"text-red-800",icon:D,label:"Rejected"}},i=d[t]||d.pending,y=i.icon;return e.jsxs("span",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold ${i.bg} ${i.text}`,children:[e.jsx(y,{className:"h-4 w-4"}),i.label]})};return e.jsxs(k,{children:[e.jsx(w,{title:`${s.title} - Voice of Changes Admin`}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_,{href:"/admin/voice-of-changes",children:e.jsx(r,{variant:"outline",size:"icon",children:e.jsx(C,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex-1",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Review Message"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"mb-6",children:N(s.status)}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Author Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:s.user.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:s.user.email})]}),s.user.membership_number&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Membership:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:s.user.membership_number})]})]})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s.title}),e.jsx("div",{className:"prose max-w-none mb-6",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.message})}),s.admin_notes&&e.jsxs("div",{className:`rounded-lg p-4 mb-6 ${s.status==="rejected"?"bg-red-50 border border-red-200":"bg-blue-50 border border-blue-200"}`,children:[e.jsx("h3",{className:`font-semibold mb-2 ${s.status==="rejected"?"text-red-900":"text-blue-900"}`,children:"Previous Admin Notes:"}),e.jsx("p",{className:`text-sm ${s.status==="rejected"?"text-red-800":"text-blue-800"}`,children:s.admin_notes})]}),e.jsxs("div",{className:"border-t pt-4 space-y-2 text-sm text-gray-600 mb-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Submitted:"}),e.jsx("span",{className:"font-medium",children:new Date(s.created_at).toLocaleString()})]}),s.updated_at!==s.created_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last Updated:"}),e.jsx("span",{className:"font-medium",children:new Date(s.updated_at).toLocaleString()})]}),s.published_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Published:"}),e.jsx("span",{className:"font-medium",children:new Date(s.published_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-3",children:[s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Approve & Publish"]}),e.jsxs(r,{onClick:()=>c(!0),variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Reject"]})]}),s.status==="approved"&&e.jsxs(r,{onClick:v,variant:"outline",className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Unpublish"]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Approve & Publish Message"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"approve-notes",children:"Admin Notes (Optional)"}),e.jsx(x,{id:"approve-notes",value:n.data.admin_notes,onChange:t=>n.setData("admin_notes",t.target.value),placeholder:"Add any notes or feedback for the author...",rows:4})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(r,{type:"submit",disabled:n.processing,className:"bg-green-600 hover:bg-green-700",children:n.processing?"Approving...":"Approve & Publish"}),e.jsx(r,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reject Message"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"reject-notes",children:"Reason for Rejection *"}),e.jsx(x,{id:"reject-notes",value:a.data.admin_notes,onChange:t=>a.setData("admin_notes",t.target.value),placeholder:"Explain why this message is being rejected...",rows:4,className:a.errors.admin_notes?"border-red-500":"",required:!0}),a.errors.admin_notes&&e.jsx("p",{className:"text-sm text-red-600",children:a.errors.admin_notes})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(r,{type:"submit",disabled:a.processing,className:"bg-red-600 hover:bg-red-700",children:a.processing?"Rejecting...":"Reject Message"}),e.jsx(r,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})]})})]})]})}export{te as default};
