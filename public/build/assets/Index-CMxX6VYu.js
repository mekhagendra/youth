import{r as j,j as e}from"./ui-CLR3-OmW.js";import{H as y,L as u,r as f}from"./app-ileJYZUn.js";import{A as N}from"./app-layout-Dlzy3rVb.js";import{B as x}from"./button-CT_f9zPj.js";import{E as v}from"./eye-GWd_ddH6.js";import{T as w}from"./trash-2-Dz6JaV6r.js";import{C as b,a as A}from"./clock-DpmfYfAM.js";import{C}from"./circle-check-big-BPrbQh3p.js";import"./vendor-kLSZ_uSw.js";import"./app-BCvv0SPs.js";import"./x-DsitI1IS.js";import"./createLucideIcon-Do8YEJy2.js";import"./index-7dRXeYU0.js";import"./index-CPiYsXfw.js";import"./users-Cg4NiC41.js";import"./target-Ga1dOSIM.js";import"./chevron-right-BkKYcLON.js";function P({auth:a,messages:d}){const[l,o]=j.useState("all"),m=a?.user&&(a.user.user_type==="System Admin"||a.user.user_type==="System Manager");if(!a?.user||!m)return null;const s=Array.isArray(d)?d:[],p=t=>{confirm("Are you sure you want to delete this message?")&&f.delete(`/admin/voice-of-changes/${t}`,{preserveScroll:!0})},h=t=>{const c={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:A},approved:{bg:"bg-green-100",text:"text-green-800",icon:C},rejected:{bg:"bg-red-100",text:"text-red-800",icon:b}},i=c[t]||c.pending,g=i.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ${i.bg} ${i.text}`,children:[e.jsx(g,{className:"h-3 w-3"}),t.charAt(0).toUpperCase()+t.slice(1)]})},n=l==="all"?s:s.filter(t=>t.status===l),r={total:s.length,pending:s.filter(t=>t.status==="pending").length,approved:s.filter(t=>t.status==="approved").length,rejected:s.filter(t=>t.status==="rejected").length};return e.jsxs(N,{children:[e.jsx(y,{title:"Voice of Changes - Admin"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Voice of Changes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Review and manage member messages"})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Messages"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.total})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.pending})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.approved})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.rejected})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Status:"}),e.jsx("div",{className:"flex gap-2",children:["all","pending","approved","rejected"].map(t=>e.jsx("button",{onClick:()=>o(t),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${l===t?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Author"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Submitted"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"No messages found"})}):n.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:t.title})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.user?.name||"Unknown"}),e.jsx("div",{className:"text-xs text-gray-500",children:t.user?.email||"N/A"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h(t.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{href:`/admin/voice-of-changes/${t.id}`,children:e.jsx(x,{variant:"outline",size:"sm",children:e.jsx(v,{className:"h-4 w-4"})})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>p(t.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(w,{className:"h-4 w-4"})})]})})]},t.id))})]})})]})]})}export{P as default};
