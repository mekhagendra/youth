import{r as u,j as e}from"./ui-CLR3-OmW.js";import{u as C,H as D,L as g,r as L}from"./app-ileJYZUn.js";import{A as M}from"./app-layout-Dlzy3rVb.js";import{B as o}from"./button-CT_f9zPj.js";import{I as c}from"./input-CkSRyoqX.js";import{L as l}from"./label-D4fyCni8.js";import{A as S}from"./arrow-left-CzBaIZ3J.js";import{X as T}from"./x-DsitI1IS.js";import{P as A}from"./plus-qB6Rb5ll.js";import"./vendor-kLSZ_uSw.js";import"./app-BCvv0SPs.js";import"./createLucideIcon-Do8YEJy2.js";import"./index-7dRXeYU0.js";import"./index-CPiYsXfw.js";import"./users-Cg4NiC41.js";import"./target-Ga1dOSIM.js";import"./chevron-right-BkKYcLON.js";function Q({team:d,members:h}){const r=C({name:d.name,description:d.description||"",is_active:d.is_active,display_order:d.display_order,members:[]}),[i,m]=u.useState(d.members.map(s=>({member_id:s.id,designation:s.designation,rank:s.rank}))),[n,b]=u.useState(""),j=s=>{if(s.preventDefault(),i.filter(t=>!t.designation||t.designation.trim()==="").length>0){alert("Please fill in the designation for all members before submitting.");return}console.log("Submitting with selected members:",i),L.put(`/admin/teams/${d.id}`,{name:r.data.name,description:r.data.description,is_active:r.data.is_active,display_order:r.data.display_order,members:i},{preserveScroll:!0,onSuccess:()=>{console.log("Team updated successfully")},onError:t=>{console.error("Validation errors:",t)}})},v=s=>{if(i.some(a=>a.member_id===s)){alert("This member is already added to the team.");return}m([...i,{member_id:s,designation:"",rank:i.length+1}])},f=s=>{const t=i.filter(x=>x.member_id!==s).map((x,k)=>({...x,rank:k+1}));m(t)},N=(s,a)=>{m(i.map(t=>t.member_id===s?{...t,designation:a}:t))},y=(s,a)=>{m(i.map(t=>t.member_id===s?{...t,rank:a}:t))},w=s=>h.find(a=>a.id===s),p=h.filter(s=>s.name.toLowerCase().includes(n.toLowerCase())||s.membership_id.toLowerCase().includes(n.toLowerCase())||s.email.toLowerCase().includes(n.toLowerCase())).filter(s=>!i.some(a=>a.member_id===s.id)),_=[...i].sort((s,a)=>s.rank-a.rank);return e.jsxs(M,{children:[e.jsx(D,{title:`Edit Team - ${d.name}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsx(g,{href:"/admin/teams",children:e.jsxs(o,{variant:"outline",children:[e.jsx(S,{className:"h-5 w-5 mr-2"}),"Back"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Team"}),e.jsx("p",{className:"mt-1 text-gray-600",children:"Update team details and manage member assignments"})]})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-4 sticky top-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Team Details"}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"Team Name *"}),e.jsx(c,{id:"name",type:"text",value:r.data.name,onChange:s=>r.setData("name",s.target.value),className:"mt-1",placeholder:"e.g., Executive Board, Youth Council",required:!0}),r.errors.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.errors.name})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:r.data.description,onChange:s=>r.setData("description",s.target.value),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Brief description of the team..."}),r.errors.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.errors.description})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"display_order",children:"Display Order"}),e.jsx(c,{id:"display_order",type:"number",value:r.data.display_order,onChange:s=>r.setData("display_order",parseInt(s.target.value)),className:"mt-1",placeholder:"0"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lower numbers appear first"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:r.data.is_active,onChange:s=>r.setData("is_active",s.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx(l,{htmlFor:"is_active",className:"mb-0",children:"Active Team"})]})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Team Members (",i.length,")"]}),i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("p",{className:"mb-2",children:"No members added yet"}),e.jsx("p",{className:"text-sm",children:"Search and add members from the list below"})]}):e.jsx("div",{className:"space-y-4",children:_.map(s=>{const a=w(s.member_id);return a?e.jsxs("div",{className:"flex items-start gap-4 p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:a.photo?e.jsx("img",{src:a.photo,alt:a.name,className:"w-16 h-16 rounded-full object-cover"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold text-xl",children:a.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",a.membership_id]}),e.jsx("p",{className:"text-sm text-gray-500",children:a.email})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:`designation-${a.id}`,className:"text-xs",children:"Designation *"}),e.jsx(c,{id:`designation-${a.id}`,type:"text",value:s.designation,onChange:t=>N(a.id,t.target.value),placeholder:"e.g., President, Member",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:`rank-${a.id}`,className:"text-xs",children:"Rank *"}),e.jsx(c,{id:`rank-${a.id}`,type:"number",value:s.rank,onChange:t=>y(a.id,parseInt(t.target.value)),className:"mt-1",min:1,required:!0})]})]})]}),e.jsx(o,{type:"button",variant:"ghost",size:"sm",onClick:()=>f(a.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(T,{className:"h-5 w-5"})})]},s.member_id):null})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Add Members"}),e.jsx("div",{className:"mb-4",children:e.jsx(c,{type:"text",value:n,onChange:s=>b(s.target.value),placeholder:"Search members by name, ID, or email...",className:"w-full"})}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:p.length===0?e.jsx("p",{className:"text-center py-8 text-gray-500",children:n?"No members found":"All active members have been added"}):p.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:s.photo?e.jsx("img",{src:s.photo,alt:s.name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-300 flex items-center justify-center text-gray-700 font-semibold",children:s.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",s.membership_id]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email})]}),e.jsxs(o,{type:"button",variant:"outline",size:"sm",onClick:()=>v(s.id),className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),"Add"]})]},s.id))})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(g,{href:"/admin/teams",children:e.jsx(o,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(o,{type:"submit",disabled:r.processing,className:"bg-blue-600 hover:bg-blue-700",children:r.processing?"Updating...":"Update Team"})]})]})]})})]})}export{Q as default};
